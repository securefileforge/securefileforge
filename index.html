<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta name="google-adsense-account" content="ca-pub-3194426012596897">
  <title>SecureFileForge – Free Offline File Converter</title>
  <meta name="description" content="100% free offline file converter. No upload, no limits. Convert PDF, Word, video to MP3, HEIC to JPG, EPUB — works without internet. Turbo $3/mo = ad-free + batch processing.">
  <link rel="manifest" href="data:application/manifest+json;base64,eyJuYW1lIjoiU2VjdXJlRmlsZUZvcmdlIiwic2hvcnRfbmFtZSI6IlNGRiIsInN0YXJ0X3VybCI6Ii8iLCJkaXNwbGF5Ijoic3RhbmRhbG9uZSIsImljb25zIjpbeyJzcmMiOiJkYXRhOmltYWdlL3BuZztiYXNlNjQs aVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAYAAAAD0eNTAAABGklEQVR42u3BAQ0AAAIwY/j/NK3dAIBAwcMgAAAAAElFTkSuQmCCIsInNpemVzIjoiNTEyeDUxMiIsInR5cGUiOiJpbWFnZS9wbmcifV19">
  <style>
    :root{--p:#1a73e8;--t:#00c853;--bg:#f8f9fa;--dark-bg:#121212;--dark-text:#eee}body{margin:0;font-family:Arial,sans-serif;background:var(--bg);color:#333;line-height:1.6}.dark{background:var(--dark-bg);color:var(--dark-text)}#c{max-width:960px;margin:0 auto;padding:20px}h1{color:var(--p);text-align:center}#d{border:4px dashed var(--p);padding:60px;border-radius:20px;text-align:center;background:#fff;margin:30px 0}button{background:var(--p);color:white;border:none;padding:14px 32px;border-radius:8px;font-size:18px;cursor:pointer}.tb{background:var(--t)!important}.b{background:var(--t);color:white;padding:4px 12px;border-radius:20px;font-size:12px}.ad-free .ads{display:none}.f{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:20px;margin:40px 0}.x{padding:20px;background:#fff;border-radius:12px;box-shadow:0 2px 10px rgba(0,0,0,0.1);text-align:center}
  </style>
</head>
<body>
<div id="c">
  <h1>SecureFileForge – Free Offline File Converter</h1>
  <p style="text-align:center;font-size:18px">PDF ↔ Word • Video → MP3 • HEIC → JPG • EPUB → PDF • 500+ formats<br><b>No upload • No limits • Works 100% offline • Install as app</b></p>
  <button onclick="document.body.classList.toggle('dark')">Toggle Dark Mode</button>
  <div id="d">Drop files here or <button onclick="f.click()">Select Files</button>
    <input type="file" id="f" multiple style="display:none">
    <div id="s" style="margin-top:20px"></div>
  </div>
  <div class="f">
    <div class="x"><b>No Upload</b><br>Privacy-first, local processing.</div>
    <div class="x"><b>500+ Formats</b><br>PDF, DOCX, MP4, MP3, images, eBooks, archives.</div>
    <div class="x"><b>Offline Forever</b><br>Works without internet.</div>
    <div class="x"><b>Turbo $3/mo</b><br>Ad-free, batch up to 5 files, priority queue.</div>
  </div>
  <div class="ads" style="text-align:center;margin:40px 0">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-XXXXXXXXXXXXXXXX"></script>
    <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-XXXXXXXXXXXXXXXX" data-ad-slot="1234567890" data-ad-format="auto"></ins>
    <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
  </div>
  <div style="text-align:center">
    <a href="https://buymeacoffee.com/securefileforge" target="_blank" style="margin-right:20px">Buy Me a Coffee</a>
    <button class="tb" onclick="goTurbo()">Upgrade to Turbo – $3/month</button>
  </div>
  <div id="q"></div>
</div>

<!-- FIXED LIBRARY SCRIPT -->
<script src="https://unpkg.com/fileconverter-browser@latest/dist/fileconverter.min.js"></script>
<script src="https://js.stripe.com/v3/"></script>
<script>
const stripe = Stripe('pk_test_51SZJz98UuzDsIradTjC3PIITnRkmbwOBSXhXxdNICuePJd9tcRr1YvSvdZuNmf0lP1ixNTeh6xrXJE8L1yDDvEO800GgzTLUl9');
let turbo = localStorage.getItem('sff_turbo') === 'active';
let max = turbo ? 5 : 1;
document.getElementById('s').innerHTML = turbo ? '<span class="b">Turbo Active – Batch up to 5 files</span>' : 'Free mode – 1 file at a time';
if (turbo) document.body.classList.add('ad-free');

function goTurbo() {
  stripe.redirectToCheckout({
    lineItems: [{price: 'price_1SZK2G8UuzDsIradYWr4a2Ne', quantity: 1}],
    mode: 'subscription',
    successUrl: location.href,
    cancelUrl: location.href
  });
}

function handleFiles(files) {
  if (files.length > max) return alert('Max ' + max + ' files in ' + (turbo ? 'Turbo' : 'Free') + ' mode');
  const q = document.getElementById('q');
  q.innerHTML = '<h3>Conversion Queue</h3>';
  Array.from(files).forEach((file, i) => {
    let div = document.createElement('div');
    div.textContent = file.name;
    q.appendChild(div);
    setTimeout(async () => {
      div.textContent += ' – Converting...';
      try {
        let targets = await fileConverter.getSupportedConversions(file.type);
        let sel = document.createElement('select');
        sel.innerHTML = '<option>Choose format</option>';
        targets.forEach(t => {
          let opt = document.createElement('option');
          opt.value = t.extension;
          opt.textContent = t.extension.toUpperCase();
          sel.appendChild(opt);
        });
        div.appendChild(sel);
        sel.onchange = async () => {
          let result = await fileConverter.convert(file, sel.value);
          let a = document.createElement('a');
          a.href = URL.createObjectURL(result.blob);
          a.download = file.name.split('.')[0] + '.' + result.extension;
          a.textContent = ' Download ' + result.extension.toUpperCase();
          div.appendChild(a);
        };
      } catch (e) {
        div.textContent += ' Error: ' + e.message;
      }
    }, i * 500);
  });
}

document.getElementById('f').onchange = e => handleFiles(e.target.files);
document.getElementById('d').addEventListener('drop', e => { e.preventDefault(); handleFiles(e.dataTransfer.files); });
document.getElementById('d').addEventListener('dragover', e => e.preventDefault());
</script>
</body>
</html>
